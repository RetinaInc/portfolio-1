var app=angular.module("ng-portfolio",["ngRoute","ngTable"]);app.config(function($interpolateProvider){});app.config(["$routeProvider",function($routeProvider){$routeProvider.when("/project",{templateUrl:"vendor/portfolio/admin/views/project.html",controller:"ProjectController"}).when("/project/create",{templateUrl:"vendor/portfolio/admin/views/project.edit.html",controller:"ProjectCreateController"}).when("/project/:id/edit",{templateUrl:"vendor/portfolio/admin/views/project.edit.html",controller:"ProjectEditController"}).otherwise({redirectTo:"/admin"})}]);app.controller("ProjectController",function($scope,$filter,ngTableParams,$http,$route,$routeParams,$location){$scope.data={};var initialised=false;$scope.initTable=function(data){$scope.tableParams=new ngTableParams({page:1,count:10,sorting:{created_at:"desc"}},{filterDelay:10,total:data.length,getData:function($defer,params){var filteredData=params.filter()?$filter("filter")(data,params.filter()):data;var orderedData=params.sorting()?$filter("orderBy")(filteredData,params.orderBy()):data;params.total(orderedData.length);$defer.resolve(orderedData.slice((params.page()-1)*params.count(),params.page()*params.count()))}})};$scope.getData=function(){$http.get("/admin/api/project").success(function(data,status,headers,config){$scope.data=data;console.log($scope.data);angular.forEach(data,function(data){data.id=parseFloat(data.id)});if(!initialised){$scope.initTable(data)}else{$scope.tableParams.reload()}}).error(function(data,status,headers,config){})};$scope.delete=function(id){$http.delete("/admin/api/project/"+id).success(function(data,status,headers,config){console.log(data);$scope.getData()}).error(function(data,status,headers,config){$scope.errors=data})};$scope.getData()});app.controller("ProjectCreateController",function($scope,$http,$route,$routeParams,$location){$scope.errors=[];$scope.data={};$scope.save=function(){console.log("Saving");console.log($scope.data);$http.post("/admin/api/project",$scope.data).success(function(data,status,headers,config){console.log(data);$location.path("/project")}).error(function(data,status,headers,config){$scope.errors=data})}});app.controller("ProjectEditController",function($scope,$http,$route,$routeParams,$location){$scope.errors=[];$scope.data={};$http.get("/admin/api/project/"+$routeParams.id+"/edit").success(function(data,status,headers,config){$scope.data=data;console.log($scope.data)}).error(function(data,status,headers,config){});$scope.save=function(){console.log("Saving");console.log($scope.data);$http.put("/admin/api/project/"+$routeParams.id,$scope.data).success(function(data,status,headers,config){console.log(data);$location.path("/project")}).error(function(data,status,headers,config){$scope.errors=data})}});
//# sourceMappingURL=../../../../src/public/admin/js/main.js.map